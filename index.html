<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
<script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="stbt_local_bot" data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
<script type="text/javascript">
  function onTelegramAuth(user) {
    alert('Logged in as ' + user.first_name + ' ' + user.last_name + ' (' + user.id + (user.username ? ', @' + user.username : '') + ')');
  }
</script>

<script type="text/javascript">
  function onTelegramAuth(user) {
    console.log('User data received:', user);
    
    // Send the user data to your backend for authentication
    fetch('https://e5eb-5-18-168-30.ngrok-free.app/api/v1/auth/tg', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(user)
    })
    .then(response => response.json()) // Parse JSON response from server
    .then(data => {
      console.log('Server response:', data); // Log server response to the console
    })
    .catch((error) => {
      console.error('Error:', error); // Log any errors that occur during the request
    });
  }
</script>
</head>
</html>
